(this.webpackJsonpplaceniffer=this.webpackJsonpplaceniffer||[]).push([[0],{38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},60:function(e,t,s){},61:function(e,t,s){},63:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(30),r=s.n(a),i=(s(38),s(39),s(10)),o=(s(40),Object(c.createContext)()),l=s(3),j=s(11),d=s(31),b=s.n(d),u=s(0),p=Object(i.forwardRef)((function(e,t){var s=Object(c.useState)(""),n=Object(j.a)(s,2),a=n[0],r=n[1];return Object(u.jsx)(b.a,{value:a,onChange:r,onSelect:r,children:function(e){var s=e.getInputProps,c=e.suggestions,n=e.getSuggestionItemProps,a=e.loading;return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",Object(l.a)({ref:t},s({placeholder:"Search Places ...",className:"location-search-input"}))),Object(u.jsxs)("div",{className:"autocomplete-dropdown-container",children:[a&&Object(u.jsx)("div",{children:"Loading..."}),c.map((function(e,t){var s=e.active?"suggestion-item--active":"suggestion-item",c=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(u.jsx)("div",Object(l.a)(Object(l.a)({},n(e,{className:s,style:c})),{},{children:Object(u.jsx)("div",{className:"place-suggestion",children:e.description})}),t)}))]})]})}})}));function h(){var e=Object(c.useRef)(!0),t=Object(c.useContext)(o),s=t.sortBy,n=t.setSortBy,a=t.term,r=t.setTerm,l=t.location,j=t.setLocation,d=t.setError,b=t.getPlaces,h=Object(i.createRef)(),O=Object(i.createRef)(),x={BestMatch:"best_match",HighestRated:"rating",MostReviewed:"review_count"},f=function(e){return s===e?"active":""},g=function(e){n(e.target.dataset.value)};Object(c.useEffect)((function(){e.current?e.current=!1:(console.log("term",a),console.log("location",l),b())}),[a,l,s]);return Object(u.jsx)("div",{className:"SearchBar",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==h.current.value&&""!==O.current.value?(r(h.current.value),j(O.current.value.split(",")[0])):d("Please type in search terms and try again")},children:[Object(u.jsx)("div",{className:"SearchBar-sort-options",children:Object(u.jsx)("ul",{children:Object.keys(x).map((function(e){var t=x[e];return Object(u.jsx)("li",{className:f(t),"data-value":t,onClick:g,children:e},t)}))})}),Object(u.jsxs)("div",{className:"SearchBar-fields",children:[Object(u.jsx)("input",{ref:h,placeholder:"Search Businesses"}),Object(u.jsx)(p,{ref:O})]}),Object(u.jsx)("div",{className:"SearchBar-submit",children:Object(u.jsx)("button",{type:"submit",children:"Let's Go"})})]})})}s(48),s(49);var O=s(14),x=s(12);function f(e){var t=e.place;return Object(u.jsxs)("div",{className:"business",children:[Object(u.jsx)("div",{className:"image-container",children:Object(u.jsx)("img",{src:t.image_url,alt:""})}),Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(u.jsx)(x.b,{className:"business-name",to:"/placeniffer/business/".concat(t.id),children:Object(u.jsx)("h2",{children:t.name})}),Object(u.jsxs)("div",{style:{display:"flex",color:"green"},children:[Object(u.jsx)("span",{children:t.rating}),Object(u.jsx)("span",{children:Object(u.jsx)(O.a,{})})]})]}),Object(u.jsxs)("div",{className:"business-information",children:[Object(u.jsxs)("div",{className:"business-information-top",children:[t.review_count>1?Object(u.jsxs)("span",{children:[t.review_count," ",Object(u.jsx)("b",{children:"reviews"})]}):Object(u.jsxs)("span",{children:[t.review_count," ",Object(u.jsx)("b",{children:"review"})]}),Object(u.jsx)("span",{style:{color:"green"},children:t.price})]}),Object(u.jsxs)("div",{className:"business-address",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"category:"})," ",t.categories.map((function(e,s){return t.categories.length-1===s?Object(u.jsx)("span",{children:e.title},s):Object(u.jsx)("span",{children:"".concat(e.title,", ")},s)}))]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"address:"})," ",t.location.display_address[0]]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"city:"})," ",t.location.display_address[1]]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"state:"})," ",t.location.display_address[2]]})]})]})]})}var g=function(e){var t=e.places;return Object(u.jsx)("div",{className:"BusinessList",children:t.map((function(e){return Object(u.jsx)(f,{place:e},e.id)}))})};function m(){var e=Object(c.useContext)(o),t=e.error,s=e.term,n=e.location,a=e.page,r=e.setPage,i=e.getPlaces,l=e.places,j=Object(c.useRef)(!0);return Object(c.useEffect)((function(){j.current?j.current=!1:i()}),[a]),Object(u.jsxs)("div",{className:"HomePage",children:[Object(u.jsx)("h1",{children:"placeniffer"}),Object(u.jsx)(h,{}),Object(u.jsx)("div",{className:"homepage-info",children:Object(u.jsx)("div",{children:l.length>0&&Object(u.jsxs)("p",{children:["Result for: ".concat(s," in "),Object(u.jsx)("span",{style:{textTransform:"capitalize"},children:"".concat(n)})]})})}),l.length>0&&Object(u.jsx)(g,{places:l}),l.length>0&&Object(u.jsx)("div",{className:"pagination",children:Object(u.jsx)("div",{style:{cursor:"pointer"},onClick:function(){r(a+1)},children:"Load more..."})}),Object(u.jsx)("div",{className:"homepage-info",children:""!==t&&0===l.length&&Object(u.jsx)("div",{children:t})})]})}var v=s(2),y=(s(52),s(33));s(60);var N=function(e){var t=e.photos;return Object(u.jsx)(y.Carousel,{showThumbs:!0,className:"carousel-container",children:t&&t.map((function(e,t){return Object(u.jsx)("div",{className:"carousel-photo",style:{backgroundImage:"url(".concat(e,")")},alt:"main logo"},t)}))})};s(61);function _(){var e=Object(v.g)().id,t=Object(c.useContext)(o),s=t.place,n=t.getPlace,a=Object(c.useState)(""),r=Object(j.a)(a,2),i=r[0],l=r[1];Object(c.useEffect)((function(){n(e)}),[]),Object(c.useEffect)((function(){if(s&&s.location&&0!==s.location.display_address.length){var e=s.location.display_address.join();l("https://www.google.com/maps/embed/v1/place?key=".concat("AIzaSyAJlieS2MnisIz4mlnFFpvpqfwry-T6bmM","&q=").concat(e))}}),[s]);var d=Object(v.f)();return Object(u.jsxs)("div",{className:"businesspage-container",children:[Object(u.jsx)("div",{className:"businesspage-header",children:Object(u.jsx)("button",{className:"businesspage-back-button",onClick:d.goBack,children:"Back to list"})}),s&&Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("h2",{className:"businesspage-heading",children:s.name})}),Object(u.jsxs)("div",{className:"businesspage-cart",children:[Object(u.jsx)("div",{className:"businesspage-cart-left",children:Object(u.jsx)(N,{photos:s.photos})}),Object(u.jsxs)("div",{className:"businesspage-cart-right",children:[Object(u.jsxs)("div",{className:"businesspage-rating-container",children:[Object(u.jsxs)("div",{style:{display:"flex",color:"green",marginRight:"1rem"},children:[Object(u.jsx)("span",{children:s.rating}),Object(u.jsx)("span",{children:Object(u.jsx)(O.a,{})})]}),Object(u.jsx)("div",{children:s.review_count>1?Object(u.jsxs)("span",{children:[s.review_count," ",Object(u.jsx)("b",{children:"reviews"})]}):Object(u.jsxs)("span",{children:[s.review_count," ",Object(u.jsx)("b",{children:"review"})]})})]}),Object(u.jsx)("div",{className:"businesspage-devider"}),s.hours&&Object(u.jsxs)("div",{className:"businesspage-hours",children:[Object(u.jsx)("span",{style:{marginRight:"0.5rem",color:s.hours[0].is_open_now?"green":"red"},children:Object(u.jsx)(O.b,{})}),Object(u.jsx)("span",{children:s.hours[0].is_open_now?"Open":"Closed"})]}),void 0!==s.price&&Object(u.jsx)("div",{className:"businesspage-text",children:"Price: ".concat(s.price)}),s.categories&&Object(u.jsxs)("div",{className:"businesspage-cats",children:[Object(u.jsxs)("span",{className:"businesspage-text text-heading",children:["Categories:","\xa0"]}),s.categories.map((function(e,t){return s.categories.length-1===t?Object(u.jsx)("span",{className:"businesspage-text",children:e.title},t):Object(u.jsx)("span",{className:"businesspage-text",children:"".concat(e.title," ,")},t)}))]}),Object(u.jsx)("div",{className:"businesspage-text",children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{className:"businesspage-text text-heading",children:["Phone:","\xa0"]}),s.phone]})}),Object(u.jsx)("div",{className:"businesspage-text",children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{className:"businesspage-text text-heading",children:["Address:","\xa0"]}),s.location.display_address.join(", ")]})}),Object(u.jsx)("iframe",{title:"map",width:"100%",height:"50%",frameBorder:"0",src:i})]})]})]})]})}var w=s(15),S=s.n(w),B=s(22),E=s(34),C="SET_PLACE",P="SET_PLACES",k="SET_ERROR",R="SET_TERM",T="SET_LOCATION",L="SET_SORT_BY",A="SET_PAGE",z="CLEAR_PLACES",I=function(e,t){switch(t.type){case P:return Object(l.a)(Object(l.a)({},e),{},{places:[].concat(Object(E.a)(e.places),[t.payload]),loading:!1});case C:return Object(l.a)(Object(l.a)({},e),{},{place:t.payload});case k:return Object(l.a)(Object(l.a)({},e),{},{error:t.payload});case R:return Object(l.a)(Object(l.a)({},e),{},{term:t.payload});case T:return Object(l.a)(Object(l.a)({},e),{},{location:t.payload});case L:return Object(l.a)(Object(l.a)({},e),{},{sortBy:t.payload});case A:return Object(l.a)(Object(l.a)({},e),{},{page:t.payload});case z:return Object(l.a)(Object(l.a)({},e),{},{places:[]})}},M=function(e){var t=Object(c.useReducer)(I,{places:[],place:null,loading:!1,term:"",location:"",sortBy:"best_match",error:"",page:0,page_size:12}),s=Object(j.a)(t,2),n=s[0],a=s[1],r=function(){var e=Object(B.a)(S.a.mark((function e(){var t,s,c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.page*n.page_size,s="https://placeniffer.herokuapp.com/searchYelp/?term=".concat(n.term,"&location=").concat(n.location,"&sortby=").concat(n.sortBy,"&limit=").concat(n.page_size,"&offset=").concat(t),console.log("url",s),e.next=5,fetch(s,{mode:"cors"});case 5:return c=e.sent,e.next=8,c.json();case 8:(r=e.sent).error&&l(r.error.description),r.businesses&&(0!==r.businesses.length?r.businesses.forEach((function(e){a({type:P,payload:e})})):l("Nothing found"));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(B.a)(S.a.mark((function e(t){var s,c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://placeniffer.herokuapp.com/searchBusiness/?id=".concat(t),e.next=3,fetch(s,{mode:"cors"});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a({type:C,payload:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return a({type:k,payload:e})};return Object(u.jsx)(o.Provider,{value:{places:n.places,place:n.place,error:n.error,term:n.term,location:n.location,sortBy:n.sortBy,page:n.page,page_size:n.page_size,getPlaces:r,getPlace:i,setError:l,setTerm:function(e){e!==n.term&&(a({type:z}),a({type:R,payload:e}))},setLocation:function(e){e!==n.location&&(a({type:z}),a({type:T,payload:e}))},setSortBy:function(e){e!==n.sortBy&&(a({type:z}),a({type:L,payload:e}))},setPage:function(e){return a({type:A,payload:e})}},children:e.children})};var J=function(){return Object(u.jsx)(M,{children:Object(u.jsx)(x.a,{children:Object(u.jsxs)(v.c,{children:[Object(u.jsx)(v.a,{path:"/placeniffer/business/:id",children:Object(u.jsx)(_,{})}),Object(u.jsx)(v.a,{path:"/placeniffer",children:Object(u.jsx)(m,{})})]})})})};r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(J,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.c5f137ed.chunk.js.map