(this.webpackJsonpplaceniffer=this.webpackJsonpplaceniffer||[]).push([[0],{36:function(e,s,t){},37:function(e,s,t){},38:function(e,s,t){},40:function(e,s,t){},41:function(e,s,t){},55:function(e,s,t){},56:function(e,s,t){},58:function(e,s,t){"use strict";t.r(s);var c=t(1),a=t.n(c),n=t(29),r=t.n(n),i=(t(36),t(37),t(14)),l=(t(38),Object(c.createContext)()),o=t(0);function j(){var e=Object(c.useRef)(!0),s=Object(c.useContext)(l),t=s.sortBy,a=s.setSortBy,n=s.term,r=s.setTerm,j=s.location,d=s.setLocation,b=s.setError,u=s.getPlaces,p=Object(i.createRef)(),h=Object(i.createRef)(),O={BestMatch:"best_match",HighestRated:"rating",MostReviewed:"review_count"},x=function(e){return t===e?"active":""},m=function(e){a(e.target.dataset.value)};Object(c.useEffect)((function(){e.current?e.current=!1:u()}),[n,j,t]);return Object(o.jsx)("div",{className:"SearchBar",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==p.current.value&&""!==h.current.value?(r(p.current.value),d(h.current.value)):b("Please type in search terms and try again")},children:[Object(o.jsx)("div",{className:"SearchBar-sort-options",children:Object(o.jsx)("ul",{children:Object.keys(O).map((function(e){var s=O[e];return Object(o.jsx)("li",{className:x(s),"data-value":s,onClick:m,children:e},s)}))})}),Object(o.jsxs)("div",{className:"SearchBar-fields",children:[Object(o.jsx)("input",{ref:p,placeholder:"Search Businesses"}),Object(o.jsx)("input",{ref:h,placeholder:"Where?"})]}),Object(o.jsx)("div",{className:"SearchBar-submit",children:Object(o.jsx)("button",{type:"submit",children:"Let's Go"})})]})})}t(40),t(41);var d=t(12),b=t(10);function u(e){var s=e.place;return Object(o.jsxs)("div",{className:"business",children:[Object(o.jsx)("div",{className:"image-container",children:Object(o.jsx)("img",{src:s.image_url,alt:""})}),Object(o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(o.jsx)(b.b,{className:"business-name",to:"/business/".concat(s.id),children:Object(o.jsx)("h2",{children:s.name})}),Object(o.jsxs)("div",{style:{display:"flex",color:"green"},children:[Object(o.jsx)("span",{children:s.rating}),Object(o.jsx)("span",{children:Object(o.jsx)(d.a,{})})]})]}),Object(o.jsxs)("div",{className:"business-information",children:[Object(o.jsxs)("div",{className:"business-information-top",children:[s.review_count>1?Object(o.jsxs)("span",{children:[s.review_count," ",Object(o.jsx)("b",{children:"reviews"})]}):Object(o.jsxs)("span",{children:[s.review_count," ",Object(o.jsx)("b",{children:"review"})]}),Object(o.jsx)("span",{style:{color:"green"},children:s.price})]}),Object(o.jsxs)("div",{className:"business-address",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"category:"})," ",s.categories.map((function(e,t){return s.categories.length-1===t?Object(o.jsx)("span",{children:e.title},t):Object(o.jsx)("span",{children:"".concat(e.title,", ")},t)}))]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"address:"})," ",s.location.display_address[0]]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"city:"})," ",s.location.display_address[1]]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"state:"})," ",s.location.display_address[2]]})]})]})]})}var p=function(e){var s=e.places;return Object(o.jsx)("div",{className:"BusinessList",children:s.map((function(e){return Object(o.jsx)(u,{place:e},e.id)}))})};function h(){var e=Object(c.useContext)(l),s=e.error,t=e.term,a=e.location,n=e.page,r=e.setPage,i=e.getPlaces,d=e.places,b=Object(c.useRef)(!0);return Object(c.useEffect)((function(){b.current?b.current=!1:i()}),[n]),Object(o.jsxs)("div",{className:"HomePage",children:[Object(o.jsx)("h1",{children:"placeniffer"}),Object(o.jsx)(j,{}),Object(o.jsx)("div",{className:"homepage-info",children:Object(o.jsx)("div",{children:d.length>0&&Object(o.jsxs)("p",{children:["Result for: ".concat(t," in "),Object(o.jsx)("span",{style:{textTransform:"capitalize"},children:"".concat(a)})]})})}),d.length>0&&Object(o.jsx)(p,{places:d}),d.length>0&&Object(o.jsx)("div",{className:"pagination",children:Object(o.jsx)("div",{style:{cursor:"pointer"},onClick:function(){r(n+1)},children:"Load more..."})}),Object(o.jsx)("div",{className:"homepage-info",children:""!==s&&0===d.length&&Object(o.jsx)("div",{children:s})})]})}var O=t(16),x=t(2),m=(t(47),t(31));t(55);var f=function(e){var s=e.photos;return Object(o.jsx)(m.Carousel,{showThumbs:!0,className:"carousel-container",children:s&&s.map((function(e,s){return Object(o.jsx)("div",{className:"carousel-photo",style:{backgroundImage:"url(".concat(e,")")},alt:"main logo"},s)}))})};t(56);function g(){var e=Object(x.g)().id,s=Object(c.useContext)(l),t=s.place,a=s.getPlace,n=Object(c.useState)(""),r=Object(O.a)(n,2),i=r[0],j=r[1];Object(c.useEffect)((function(){a(e)}),[]),Object(c.useEffect)((function(){if(t&&t.location&&0!==t.location.display_address.length){var e=t.location.display_address.join();j("https://www.google.com/maps/embed/v1/place?key=".concat("AIzaSyAJlieS2MnisIz4mlnFFpvpqfwry-T6bmM","&q=").concat(e))}}),[t]);var b=Object(x.f)();return Object(o.jsxs)("div",{className:"businesspage-container",children:[Object(o.jsx)("div",{className:"businesspage-header",children:Object(o.jsx)("button",{className:"businesspage-back-button",onClick:b.goBack,children:"Back to list"})}),t&&Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:Object(o.jsx)("h2",{className:"businesspage-heading",children:t.name})}),Object(o.jsxs)("div",{className:"businesspage-cart",children:[Object(o.jsx)("div",{className:"businesspage-cart-left",children:Object(o.jsx)(f,{photos:t.photos})}),Object(o.jsxs)("div",{className:"businesspage-cart-right",children:[Object(o.jsxs)("div",{className:"businesspage-rating-container",children:[Object(o.jsxs)("div",{style:{display:"flex",color:"green",marginRight:"1rem"},children:[Object(o.jsx)("span",{children:t.rating}),Object(o.jsx)("span",{children:Object(o.jsx)(d.a,{})})]}),Object(o.jsx)("div",{children:t.review_count>1?Object(o.jsxs)("span",{children:[t.review_count," ",Object(o.jsx)("b",{children:"reviews"})]}):Object(o.jsxs)("span",{children:[t.review_count," ",Object(o.jsx)("b",{children:"review"})]})})]}),Object(o.jsx)("div",{className:"businesspage-devider"}),t.hours&&Object(o.jsxs)("div",{className:"businesspage-hours",children:[Object(o.jsx)("span",{style:{marginRight:"0.5rem",color:t.hours[0].is_open_now?"green":"red"},children:Object(o.jsx)(d.b,{})}),Object(o.jsx)("span",{children:t.hours[0].is_open_now?"Open":"Closed"})]}),void 0!==t.price&&Object(o.jsx)("div",{className:"businesspage-text",children:"Price: ".concat(t.price)}),t.categories&&Object(o.jsxs)("div",{className:"businesspage-cats",children:[Object(o.jsxs)("span",{className:"businesspage-text text-heading",children:["Categories:","\xa0"]}),t.categories.map((function(e,s){return t.categories.length-1===s?Object(o.jsx)("span",{className:"businesspage-text",children:e.title},s):Object(o.jsx)("span",{className:"businesspage-text",children:"".concat(e.title," ,")},s)}))]}),Object(o.jsx)("div",{className:"businesspage-text",children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("span",{className:"businesspage-text text-heading",children:["Phone:","\xa0"]}),t.phone]})}),Object(o.jsx)("div",{className:"businesspage-text",children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("span",{className:"businesspage-text text-heading",children:["Address:","\xa0"]}),t.location.display_address.join(", ")]})}),Object(o.jsx)("iframe",{title:"map",width:"100%",height:"50%",frameBorder:"0",src:i})]})]})]})]})}var v=t(13),y=t.n(v),N=t(22),_=t(32),w=t(4),B="SET_PLACE",E="SET_PLACES",S="SET_ERROR",C="SET_TERM",P="SET_LOCATION",R="SET_SORT_BY",k="SET_PAGE",T="CLEAR_PLACES",L=function(e,s){switch(s.type){case E:return Object(w.a)(Object(w.a)({},e),{},{places:[].concat(Object(_.a)(e.places),[s.payload]),loading:!1});case B:return Object(w.a)(Object(w.a)({},e),{},{place:s.payload});case S:return Object(w.a)(Object(w.a)({},e),{},{error:s.payload});case C:return Object(w.a)(Object(w.a)({},e),{},{term:s.payload});case P:return Object(w.a)(Object(w.a)({},e),{},{location:s.payload});case R:return Object(w.a)(Object(w.a)({},e),{},{sortBy:s.payload});case k:return Object(w.a)(Object(w.a)({},e),{},{page:s.payload});case T:return Object(w.a)(Object(w.a)({},e),{},{places:[]})}},A=function(e){var s=Object(c.useReducer)(L,{places:[],place:null,loading:!1,term:"",location:"",sortBy:"best_match",error:"",page:0,page_size:12}),t=Object(O.a)(s,2),a=t[0],n=t[1],r=function(){var e=Object(N.a)(y.a.mark((function e(){var s,t,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.page*a.page_size,t="https://placeniffer.herokuapp.com/searchYelp/?term=".concat(a.term,"&location=").concat(a.location,"&sortby=").concat(a.sortBy,"&limit=").concat(a.page_size,"&offset=").concat(s),e.next=4,fetch(t,{mode:"cors"});case 4:return c=e.sent,e.next=7,c.json();case 7:(r=e.sent).error&&j(r.error.description),r.businesses&&(0!==r.businesses.length?r.businesses.forEach((function(e){n({type:E,payload:e})})):j("Nothing found"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(N.a)(y.a.mark((function e(s){var t,c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://placeniffer.herokuapp.com/searchBusiness/?id=".concat(s),e.next=3,fetch(t,{mode:"cors"});case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,n({type:B,payload:a});case 8:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),j=function(e){return n({type:S,payload:e})};return Object(o.jsx)(l.Provider,{value:{places:a.places,place:a.place,error:a.error,term:a.term,location:a.location,sortBy:a.sortBy,page:a.page,page_size:a.page_size,getPlaces:r,getPlace:i,setError:j,setTerm:function(e){e!==a.term&&(n({type:T}),n({type:C,payload:e}))},setLocation:function(e){e!==a.location&&(n({type:T}),n({type:P,payload:e}))},setSortBy:function(e){e!==a.sortBy&&(n({type:T}),n({type:R,payload:e}))},setPage:function(e){return n({type:k,payload:e})}},children:e.children})};var z=function(){return Object(o.jsx)(A,{children:Object(o.jsx)(b.a,{children:Object(o.jsxs)(x.c,{children:[Object(o.jsx)(x.a,{path:"/business/:id",children:Object(o.jsx)(g,{})}),Object(o.jsx)(x.a,{path:"/",children:Object(o.jsx)(h,{})})]})})})};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(z,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.19938574.chunk.js.map